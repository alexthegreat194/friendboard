{{#with group}}

    <div class="p-10 shadow mb-4 bg-gray-100">
        <div class="flex flex-col mb-3">
            <h1 class="text-3xl font-bold">{{name}}</h1>
            <h3 class="text-md font-thin">Created by <span class="font-semibold">{{owner.profile.name}}</span></h3>
            <h5 class="text-md font-thin">Use code <span class="font-semibold">{{code}}</span> to join the group</h5>
        </div>
        <div class="flex">
            <button id="new-event" class="btn btn-success new-event-button"
                data-bs-toggle="modal" data-bs-target="#eventModal">
                New Event
            </button>

            <button href="" class="btn btn-success" 
                data-bs-toggle="modal" data-bs-target="#listModal"> 
                New Shopping List
            </button>

            <button href="" class="btn btn-success" 
                data-bs-toggle="modal" data-bs-target="#goalModal"> 
                New Group Goal 
            </button>
        </div>
    </div>

    


    <div class="modal fade fixed top-0 left-0 hidden w-full h-full outline-none overflow-x-hidden overflow-y-auto"
    id="eventModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog relative w-auto pointer-events-none">
            <div
                class="modal-content border-none shadow-lg relative flex flex-col w-full pointer-events-auto bg-white bg-clip-padding rounded-md outline-none text-current">
                <div
                    class="modal-header flex flex-shrink-0 items-center justify-between p-4 border-b border-gray-200 rounded-t-md">
                    <h5 class="text-xl font-medium leading-normal text-gray-800" id="exampleModalLabel">
                    New Event
                    </h5>
                    <button type="button"
                    class="btn-close box-content w-4 h-4 p-1 text-black border-none rounded-none opacity-50 focus:shadow-none focus:outline-none focus:opacity-100 hover:text-black hover:opacity-75 hover:no-underline"
                    data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body relative p-4">
                    <form action="/group/{{id}}/events/new" method="post" 
                        class="flex flex-col gap-4 p-5">
                        
                        <div class="flex flex-col">
                            <label for="name">Name</label>
                            <input type="text" name="name" id="name"
                                class="border rounded p-1" />
                        </div>
            
                        <div class="flex flex-col">
                            <label for="description">Description</label>
                            <input type="text" name="description" id="description"
                                class="border rounded p-1" />
                        </div>
            
                        <div class="flex flex-col">
                            <label for="date">Date</label>
                            <input type="datetime-local" name="date" id="date"
                                class="border rounded p-1" />
                        </div>
            
                        <input type="submit" value="Create Event" 
                            class="rounded-xl bg-blue-600 text-white p-3 
                            hover:bg-blue-700 hover:cursor-pointer transition-colors"/>
                    </form>
                </div>
            </div>
        </div>
    </div>

    
    <div class="modal fade fixed top-0 left-0 hidden w-full h-full outline-none overflow-x-hidden overflow-y-auto"
    id="listModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog relative w-auto pointer-events-none">
            <div
            class="modal-content border-none shadow-lg relative flex flex-col w-full pointer-events-auto bg-white bg-clip-padding rounded-md outline-none text-current">
                <div
                    class="modal-header flex flex-shrink-0 items-center justify-between p-4 border-b border-gray-200 rounded-t-md">
                    <h5 class="text-xl font-medium leading-normal text-gray-800" id="exampleModalLabel">
                    Shopping List
                    </h5>
                    <button type="button"
                    class="btn-close box-content w-4 h-4 p-1 text-black border-none rounded-none opacity-50 focus:shadow-none focus:outline-none focus:opacity-100 hover:text-black hover:opacity-75 hover:no-underline"
                    data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body relative p-4">
                    <form action="/group/{{id}}/shoppinglist/new" method="post"
                        class="flex flex-col gap-4 p-5">
                        <div class="flex flex-col">
                            <label for="name">Name</label>
                            <input type="text" name="name" id="name"
                                class="border rounded p-1" />
                        </div>
                        
                        <input type="submit" value="Create List"
                            class="rounded-xl bg-blue-600 text-white p-3
                            hover:bg-blue-700 hover:cursor-pointer transition-colors"/>
                    </form>
                </div>
            </div>
        </div>
    </div>


    <div class="modal fade fixed top-0 left-0 hidden w-full h-full outline-none overflow-x-hidden overflow-y-auto"
    id="goalModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog relative w-auto pointer-events-none">
            <div class="modal-content border-none shadow-lg relative flex flex-col w-full pointer-events-auto bg-white bg-clip-padding rounded-md outline-none text-current">
                <div
                    class="modal-header flex flex-shrink-0 items-center justify-between p-4 border-b border-gray-200 rounded-t-md">
                    <h5 class="text-xl font-medium leading-normal text-gray-800" id="exampleModalLabel">
                        New Group Goal
                    </h5>
                    <button type="button"
                    class="btn-close box-content w-4 h-4 p-1 text-black border-none rounded-none opacity-50 focus:shadow-none focus:outline-none focus:opacity-100 hover:text-black hover:opacity-75 hover:no-underline"
                    data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body relative p-4">
                    <form action="/group/{{id}}/goal/new" method="post"
                        class="flex flex-col gap-4 p-5">

                        <div class="flex flex-col">
                            <label for="name">Name</label>
                            <input type="text" name="name" id="name"
                                class="border rounded p-1" />
                        </div>
                        
                        <div class="flex flex-col">
                            <label for="cost">Cost</label>
                            <input type="number" name="cost" id="cost"
                                class="border rounded p-1" />
                        </div>

                        <div class="flex flex-col">
                            <label for="name">Description</label>
                            <textarea name="description" id="description" cols="30" rows="2" 
                                class="border rounded p-1" /> </textarea>
                        </div>
                        
                        <input type="submit" value="Create Goal"
                            class="rounded-xl bg-blue-600 text-white p-3
                            hover:bg-blue-700 hover:cursor-pointer transition-colors"/>
                    </form>
                </div>
                
            </div>
        </div>
    </div>
    
{{/with}}

{{#if goals}}
    <h1>Goals</h1>
    <ul>
        {{#each goals}}
            <li>{{this.name}}</li>
        {{/each}}
    </ul>
{{else}}
    <h1>No Goals</h1>
{{/if}}

{{#if shoppingLists}}
    <div>
        <h1>Shopping Lists</h1>
        <div>
            {{#each shoppingLists}}
                <div class="w-1/2 border rounded">
                    <h1>{{name}}</h1>
                    <a href="/group/{{groupId}}/shoppinglist/{{id}}/delete"
                        class="btn btn-danger">Delete</a>
                    <table class="table-auto">
                        <thead>
                            <tr>
                                <th>Item</th>
                                <th>Quantity</th>
                                <th>Delete</th>
                            </tr>
                        </thead>
                        <tbody>
                            {{#each items}}
                                <tr>
                                    <td>{{name}}</td>
                                    <td>{{quantity}}</td>
                                    <td class="p-5">
                                        <a href="/group/{{groupId}}/shoppinglist/{{shoppingListId}}/item/{{id}}/delete"
                                            class="btn btn-danger">
                                            Delete
                                        </a>
                                    </td>
                                </tr>
                            {{/each}}
                        </tbody>
                    </table>
                    <form action="/group/{{group.id}}/shoppinglist/{{id}}/item/new" method="post"
                        class="flex flex-col gap-4 p-5">
                        <div class="flex flex-col">
                            <label for="name"
                                class="">Name</label>
                            <input type="text" name="name" id="name"
                                class="border rounded p-1" />
                        </div>
                        <div class="flex flex-col">
                            <label for="amount"
                                class="">Amount</label>
                            <input type="number" name="amount" id="amount"
                                class="border rounded p-1" />
                        </div>
                        <input type="submit" value="Submit"
                            class="btn btn-success">
                    </form>
                </div>
            {{/each}}
        </div>
    </div>
{{else}}
    <h1>No Shopping Lists</h1>
{{/if}}

{{#if events}}

    events
    <div class="grid grid-rows-2">
        {{#each events}}
            <div class="border rounded p-3">
                <h1 class="text-xl font-bold">{{name}}</h1>
                <h3 class="text-md font-light">{{description}}</h3>
                <h3 class="text-md font-light">{{date}}</h3>
                <h3>Creator: {{creator.profile.name}}</h3>
    
                <div class="">
                    <h1>people attending:</h1>
                    {{#each profiles}}
                        <h3>{{name}}</h3>                    
                    {{/each}}
                </div>
    
                <div class="flex m-3">
                    {{!-- <a href="/group/{{id}}/events/{{id}}"
                        class="rounded-xl bg-blue-600 text-white p-3">View</a> --}}
                    {{#if isOwner}}
                    <a href="/group/{{group.id}}/events/{{id}}/delete" 
                        class="rounded-xl bg-red-600 text-white p-3">Delete</a>
                    {{else}}
                        {{#if isAttending}}
                            <a href="/group/{{group.id}}/events/{{id}}/leave" 
                                class="rounded-xl bg-red-600 text-white p-3">Leave</a>
                        {{else}}
                            <a href="/group/{{group.id}}/events/{{id}}/join" 
                                class="rounded-xl bg-blue-600 text-white p-3">Join</a>
                        {{/if}}
                    {{/if}}
                </div>
            </div>
        {{/each}}
    </div>

{{else}}
    no events
{{/if}}
